{"version":3,"sources":["webpack://@sycho/flarum-action-log/webpack/bootstrap","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['Model']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/icon']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Button']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['Component']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['utils/ItemList']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['tags/helpers/tagsLabel']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['tags/models/Tag']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['app']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['utils/mixin']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['extend']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Page']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Select']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['utils/Stream']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Dropdown']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['utils/withAttr']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Switch']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Modal']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Placeholder']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/avatar']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/username']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/AdminNav']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@sycho/flarum-action-log/external \"flarum.core\"","webpack://@sycho/flarum-action-log/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@sycho/flarum-action-log/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@sycho/flarum-action-log/./src/admin/models/ActionLogEntry.js","webpack://@sycho/flarum-action-log/./src/admin/components/Input.js","webpack://@sycho/flarum-action-log/./src/admin/modals/ActionLogSettingsModal.js","webpack://@sycho/flarum-action-log/./src/admin/modals/FiltersHelpModal.js","webpack://@sycho/flarum-action-log/./src/admin/utils/ActionLogControls.js","webpack://@sycho/flarum-action-log/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@sycho/flarum-action-log/./src/admin/utils/Formatter.js","webpack://@sycho/flarum-action-log/./src/admin/components/ActionLogEntryList.js","webpack://@sycho/flarum-action-log/./src/admin/components/ActionLogPage.js","webpack://@sycho/flarum-action-log/./src/admin/addActionLogPane.js","webpack://@sycho/flarum-action-log/./src/admin/compat.js","webpack://@sycho/flarum-action-log/./src/admin/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_extends","assign","target","arguments","length","source","apply","this","_inheritsLoose","subClass","superClass","constructor","__proto__","ActionLogEntry","mixin","Model","id","attribute","type","actor","hasOne","resourceType","resourceId","createdAt","transformDate","format","discussion","post","group","user","Input","view","attrs","className","icon","parentClassName","iconValue","class","Component","ActionLogSettingsModal","oninit","vnode","excludedLoggingSetting","setting","JSON","stringify","title","app","translator","trans","form","actions","items","icons","keys","map","resourceTypes","action","state","getExcludedLoggingValue","includes","onchange","actionNames","parse","actionName","excludedLogging","filter","item","push","SettingsModal","FiltersHelpModal","content","gambits","gambit","Modal","ActionLogControls","component","mainControls","ItemList","add","onclick","clear","modal","show","filterControls","placeholder","query","oninput","search","buttonClassName","label","sort","sortingOptions","active","updateSort","buildPagination","load","moderation","administration","tag","extension","permission","locked","unlocked","deleted","stickied","unstickied","suspended","unsuspended","approved","created","enabled","disabled","uninstalled","tagged","renamed","hidden","restored","activated","edited","withAttr","loading","searching","searchTimeout","clearTimeout","setTimeout","confirm","request","url","forum","method","then","obj","Formatter","entry","langKey","handle","uniqueHandler","charAt","toUpperCase","slice","genericHandler","index","guessResourceName","version","style","link","href","discussionTagged","tags","oldTags","tagTextConstructor","transChoice","tagsText","tagsLabel","Tag","attributes","groups","oncreate","$","dom","tooltip","placement","backgroundColor","configurable","writable","ActionLogEntryList","entries","text","controls","avatar","username","formattedName","humanTime","ActionLogPage","newest","oldest","offset","limit","total","count","page","Stream","toArray","params","store","find","requestParams","handleResponse","redraw","q","response","payload","meta","links","Math","ceil","isTagsEnabled","formatName","prev","hasPrev","options","getPages","changePage","next","hasNext","pageRange","Array","from","v","k","number","data","settings","extensions_enabled","indexOf","Page","routes","path","extensionSettings","route","set","extend","AdminNav","description","initializers","models","addActionLogPane","actionLogCompat"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['tags/helpers/tagsLabel'];","module.exports = flarum.core.compat['tags/models/Tag'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['utils/withAttr'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Placeholder'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core;","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class ActionLogEntry extends mixin(Model, {\n  id: Model.attribute('id'),\n  name: Model.attribute('name'),\n  type: Model.attribute('type'),\n  actor: Model.hasOne('actor'),\n  resourceType: Model.attribute('resource_type'),\n  resourceId: Model.attribute('resource_id'),\n  createdAt: Model.attribute('created_at', Model.transformDate),\n  format: Model.attribute('format'),\n\n  discussion: Model.hasOne('discussion'),\n  post: Model.hasOne('post'),\n  group: Model.hasOne('group'),\n  user: Model.hasOne('user'),\n}) {}\n","import Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\n\nexport default class Input extends Component {\n  view() {\n    this.attrs.className = this.attrs.className || '';\n\n    this.attrs.className += ' ActionLog-FormControl';\n\n    if (this.attrs.icon) {\n      this.attrs.className += ' hasIcon';\n    }\n\n    let className = `ActionLog-input ${this.attrs.parentClassName || ''}`;\n\n    return (\n      <div className={className}>\n        {this.icon()}\n        <input {...this.attrs} />\n      </div>\n    );\n  }\n\n  icon() {\n    if (!this.attrs.icon) return;\n\n    const iconValue = this.attrs.icon;\n\n    delete this.attrs.icon;\n\n    return <span class=\"ActionLog-inputIcon\">{icon(iconValue)}</span>;\n  }\n}\n","import SettingsModal from 'flarum/components/SettingsModal';\nimport Switch from 'flarum/components/Switch';\nimport Button from 'flarum/components/Button';\nimport icon from 'flarum/helpers/icon';\n\nexport default class ActionLogSettingsModal extends SettingsModal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.excludedLoggingSetting = this.setting('sycho-action-log.excluded_logging', JSON.stringify([]));\n  }\n\n  title() {\n    return app.translator.trans('sycho-action-log.admin.settings');\n  }\n\n  form() {\n    const actions = this.attrs.actions.items;\n    const icons = this.attrs.actions.icons;\n\n    return [\n      <p>{app.translator.trans('sycho-action-log.admin.action_settings')}</p>,\n      Object.keys(actions).map((key) => (\n        <div className=\"ActionLogSettings-logTypes\">\n          <h3>\n            <span>{app.translator.trans(`sycho-action-log.admin.actions.${key}.label`)}</span>\n          </h3>\n          {Object.keys(actions[key]).map((resourceType) => (\n            <div className=\"ActionLogSettings-resourceTypes\">\n              <h4>\n                {app.translator.trans(`sycho-action-log.admin.actions.${key}.${resourceType}.label`)}\n                <span className=\"ActionLog-titleIcon\">{icon(icons.resourceTypes[resourceType])}</span>\n              </h4>\n              {actions[key][resourceType].map((action) => (\n                <div className=\"Form-group\">\n                  <Switch\n                    state={!this.getExcludedLoggingValue().includes(`${key}.${resourceType}.${action}`)}\n                    onchange={this.switch.bind(this, key, resourceType, action)}\n                  >\n                    {app.translator.trans(`sycho-action-log.admin.actions.${key}.${resourceType}.${action}.label`)}\n                    <span className=\"ActionLog-titleIcon\">{icon(icons.actionNames[action])}</span>\n                  </Switch>\n                </div>\n              ))}\n            </div>\n          ))}\n        </div>\n      )),\n    ];\n  }\n\n  getExcludedLoggingValue() {\n    return JSON.parse(this.excludedLoggingSetting());\n  }\n\n  switch(key, resourceType, action, value) {\n    const actionName = `${key}.${resourceType}.${action}`;\n    let excludedLogging = this.getExcludedLoggingValue();\n\n    if (!value) excludedLogging.push(actionName);\n    else excludedLogging = excludedLogging.filter((item) => item !== actionName);\n\n    this.excludedLoggingSetting(JSON.stringify(excludedLogging));\n  }\n}\n","import Modal from 'flarum/components/Modal';\n\nexport default class FiltersHelpModal extends Modal {\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        {app.translator.trans('sycho-action-log.admin.gambits.description')}\n        <ul>\n          {this.gambits().map((gambit) => (\n            <li>\n              <strong>{gambit}:</strong> {app.translator.trans(`sycho-action-log.admin.gambits.items.${gambit}`)}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  title() {\n    return app.translator.trans('sycho-action-log.admin.gambits.label');\n  }\n\n  gambits() {\n    return ['type', 'action', 'resource', 'actor'];\n  }\n}\n","import ItemList from 'flarum/utils/ItemList';\nimport Button from 'flarum/components/Button';\nimport Dropdown from 'flarum/components/Dropdown';\nimport withAttr from 'flarum/utils/withAttr';\nimport Input from '../components/Input';\nimport ActionLogSettingsModal from '../modals/ActionLogSettingsModal';\nimport FiltersHelpModal from '../modals/FiltersHelpModal';\n\nexport default class ActionLogControls {\n  constructor(component) {\n    this.component = component;\n  }\n\n  mainControls() {\n    const items = new ItemList();\n\n    items.add(\n      'clear',\n      <Button className=\"Button Button--primary\" icon=\"fas fa-trash\" onclick={this.clear.bind(this)}>\n        {app.translator.trans('sycho-action-log.admin.clear')}\n      </Button>\n    );\n\n    items.add(\n      'settings',\n      <Button className=\"Button\" icon=\"fas fa-cogs\" onclick={() => app.modal.show(ActionLogSettingsModal, { actions: this.actions() })}>\n        {app.translator.trans('sycho-action-log.admin.settings')}\n      </Button>\n    );\n\n    return items;\n  }\n\n  filterControls() {\n    const items = new ItemList();\n\n    items.add(\n      'search',\n      <Input\n        icon=\"fas fa-filter\"\n        parentClassName=\"ActionLog-search\"\n        className=\"FormControl\"\n        placeholder={app.translator.trans('sycho-action-log.admin.search')}\n        value={this.component.query()}\n        oninput={this.search.bind(this)}\n      />\n    );\n\n    items.add('help', <Button className=\"Button Button--icon\" icon=\"fas fa-question\" onclick={() => app.modal.show(FiltersHelpModal)} />);\n\n    items.add(\n      'sort',\n      <Dropdown buttonClassName=\"Button\" label={app.translator.trans(`sycho-action-log.admin.sort.${this.component.sort}`)}>\n        {Object.keys(this.component.sortingOptions).map((key) => {\n          const active = this.component.sort === key;\n\n          return (\n            <Button icon={active ? 'fas fa-check' : true} onclick={this.updateSort.bind(this, key)} active={active}>\n              {app.translator.trans(`sycho-action-log.admin.sort.${key}`)}\n            </Button>\n          );\n        })}\n      </Dropdown>\n    );\n\n    items.add('pagination', <div>{this.component.buildPagination()}</div>);\n\n    items.add('refresh', <Button className=\"Button Button--icon\" icon=\"fas fa-sync\" onclick={this.component.load.bind(this.component)} />);\n\n    return items;\n  }\n\n  actions() {\n    const items = {\n      moderation: {\n        discussion: ['locked', 'unlocked', 'hidden', 'restored', 'deleted', 'stickied', 'unstickied', 'tagged', 'renamed'],\n        user: ['suspended', 'unsuspended', 'activated'],\n        post: ['approved'],\n      },\n      administration: {\n        group: ['created', 'deleted'],\n        tag: ['created', 'deleted'],\n        extension: ['enabled', 'disabled', 'uninstalled'],\n        permission: ['edited'],\n      },\n    };\n\n    const icons = {\n      resourceTypes: {\n        discussion: 'fas fa-comments',\n        user: 'fas fa-user',\n        post: 'fas fa-reply',\n        extension: 'fas fa-puzzle-piece',\n        group: 'fas fa-user-friends',\n        tag: 'fas fa-tag',\n        permission: 'fas fa-key',\n      },\n      actionNames: {\n        locked: 'fas fa-lock',\n        unlocked: 'fas fa-unlock',\n        deleted: 'fas fa-trash',\n        stickied: 'fas fa-thumbtack',\n        unstickied: 'fas fa-thumbtack',\n        suspended: 'fas fa-ban',\n        unsuspended: 'fas fa-check',\n        approved: 'fas fa-check',\n        created: 'fas fa-plus',\n        enabled: 'fas fa-check',\n        disabled: 'fas fa-ban',\n        uninstalled: 'fas fa-times',\n        tagged: 'fas fa-tag',\n        renamed: 'fas fa-pencil-alt',\n        hidden: 'fas fa-eye-slash',\n        restored: 'fas fa-reply',\n        activated: 'fas fa-bolt',\n        edited: 'fas fa-cog',\n      },\n    };\n\n    return { items, icons };\n  }\n\n  updateSort(sort) {\n    this.component.load({ sort });\n  }\n\n  search() {\n    withAttr('value', this.component.query)();\n\n    this.component.loading = true;\n    this.searching = () => this.component.load({ query: this.component.query() });\n\n    if (this.searchTimeout) clearTimeout(this.searchTimeout);\n\n    this.searchTimeout = setTimeout(this.searching, 250);\n  }\n\n  clear() {\n    if (!confirm(app.translator.trans('sycho-action-log.admin.clear_confirmation'))) return;\n\n    this.component.loading = true;\n\n    app\n      .request({\n        url: app.forum.attribute('apiUrl') + '/action-log-entries',\n        method: 'DELETE',\n      })\n      .then(() => this.component.load());\n  }\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import ActionLogEntry from '../models/ActionLogEntry';\nimport tagsLabel from 'flarum/tags/helpers/tagsLabel';\nimport Tag from 'flarum/tags/models/Tag';\nimport icon from 'flarum/helpers/icon';\n\n/**\n * Finds the appropriate language string\n * and builds the name of the action taken\n */\nexport default class Formatter {\n  static tagsText = 'sycho-action-log.admin.actions.moderation.discussion.tagged.action.tags_text';\n\n  /**\n   * @param entry {ActionLogEntry}\n   */\n  constructor(entry) {\n    this.entry = entry;\n    this.langKey = `sycho-action-log.admin.actions.${entry.type()}`;\n  }\n\n  /**\n   * @returns {string}\n   */\n  handle() {\n    if (this.entry.resourceType().length) {\n      this.langKey += `.${this.entry.resourceType()}`;\n    }\n\n    this.langKey += `.${this.entry.name()}.action`;\n\n    const uniqueHandler = this.entry.resourceType() + this.entry.name().charAt(0).toUpperCase() + this.entry.name().slice(1);\n\n    if (this[uniqueHandler]) return this[uniqueHandler]();\n\n    return this.genericHandler();\n  }\n\n  /**\n   * @returns {string}\n   */\n  genericHandler() {\n    let format = this.entry.format();\n\n    // If there are any objects, convert them to strings using the buildResourceName() method\n    Object.keys(format).map((key, index) => {\n      if (typeof format[key] !== 'object') return;\n\n      let type = format[key].type || key;\n\n      if (!this[type]) type = 'guessResourceName';\n\n      // The core code tries to get the displayName attribute when the\n      // translation parameter key is named 'user', even if the value is a string\n      // so we have no choice but to add some ugly hackish code here\n      format[key === 'user' ? 'u' : key] = this[type](this.entry.format()[key] || {}, key);\n\n      if (key === 'user') delete format.user;\n    });\n\n    Object.keys(format).map((key, index) => {\n      format[key] = <strong>{format[key]}</strong>;\n    });\n\n    return app.translator.trans(this.langKey, format);\n  }\n\n  /**\n   * Tries to build JSX representing the resource\n   *\n   * @param format {object}\n   * @param key {number}\n   * @returns {string || string[]}\n   */\n  guessResourceName(format, key) {\n    if (typeof format.items !== 'undefined' && format.items.length) {\n      return format.items.map((item) => this.guessResourceName(item, format.type));\n    }\n\n    let name = format.title || '';\n\n    if (format.id) {\n      format.version = `#${format.id}`;\n    }\n\n    if (format.version) {\n      name = [name, <i> ({format.version})</i>];\n    }\n\n    if (format.icon) {\n      name = [\n        <span className=\"Badge ActionLogExtensionIcon\" style={format.icon}>\n          {icon(format.icon.name)}\n        </span>,\n        name,\n      ];\n    }\n\n    if (format.link) {\n      name = <a href={format.link}>{name}</a>;\n    }\n\n    return name;\n  }\n\n  /**\n   * Special handler for discussion tagging actions\n   */\n  discussionTagged() {\n    const format = this.entry.format();\n\n    if (Object.keys(format.tags.items).length && Object.keys(format.oldTags.items).length) this.langKey += '.add_remove';\n    else if (Object.keys(format.tags.items).length) this.langKey += '.add';\n    else this.langKey += '.remove';\n\n    const tagTextConstructor = (tags) =>\n      app.translator.transChoice(Formatter.tagsText, Object.keys(tags).length, {\n        tags: tagsLabel(\n          Object.keys(tags).map((key) => {\n            return new Tag({ attributes: tags[key] });\n          })\n        ),\n      });\n\n    format.tags = tagTextConstructor(format.tags.items);\n    format.oldTags = tagTextConstructor(format.oldTags.items);\n    format.discussion = <strong>{this.guessResourceName(format, 'discussion')}</strong>;\n\n    return app.translator.trans(this.langKey, format);\n  }\n\n  /**\n   * @param format\n   * @param key\n   */\n  tag(format, key) {\n    return tagsLabel([new Tag({ attributes: format })]);\n  }\n\n  /**\n   * @param format {object}\n   * @returns {*}\n   */\n  groups(format) {\n    return format.items.map((group) => (\n      <span\n        className=\"Badge ActionLogExtensionIcon\"\n        title={group.name}\n        oncreate={(vnode) => $(vnode.dom).tooltip({ placement: 'top' })}\n        style={{ backgroundColor: group.icon.backgroundColor }}\n      >\n        {icon(group.icon.name)}\n      </span>\n    ));\n  }\n\n  /**\n   * @param format {object}\n   * @returns {*}\n   */\n  permission(format) {\n    return <code>{format.title}</code>;\n  }\n}\n","import Component from 'flarum/Component';\nimport Placeholder from 'flarum/components/Placeholder';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport humanTime from 'flarum/helpers/humanTime';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport icon from 'flarum/helpers/icon';\n\nexport default class ActionLogEntryList extends Component {\n  view() {\n    if (this.attrs.loading) {\n      return <LoadingIndicator className=\"LoadingIndicator--block\" />;\n    }\n\n    if (!this.attrs.entries.length) {\n      return <Placeholder text={app.translator.trans('sycho-action-log.admin.no_entries')} />;\n    }\n\n    const { icons } = this.attrs.controls.actions();\n\n    return (\n      <div className=\"ActionLogGrid\">\n        {this.attrs.entries.map((entry) => (\n          <div className=\"ActionLogGrid-item\">\n            <div className=\"ActionLogGrid-itemIcon\">\n              <div className=\"ActionLogGrid-itemIconMain\">\n                {icon(icons.resourceTypes[entry.resourceType()])}\n                <span\n                  className=\"ActionLogGrid-itemIconSecondary Badge\"\n                  title={entry.name()}\n                  oncreate={(vnode) => $(vnode.dom).tooltip({ placement: 'bottom' })}\n                >\n                  {icon(icons.actionNames[entry.name()])}\n                </span>\n              </div>\n            </div>\n            <div className=\"ActionLogGrid-Avatar\">{avatar(entry.actor())}</div>\n            <div className=\"ActionLogGrid-itemContent\">\n              <div className=\"ActionLogGrid-entryActor\">{username(entry.actor())}</div>\n              <div className=\"ActionLogGrid-entryName\">{entry.formattedName}</div>\n              <div className=\"ActionLogGrid-entryDetails\">\n                <div className=\"ActionLogGrid-entryType\">{entry.type()}</div>\n                <div className=\"ActionLogGrid-entryTime\">\n                  {icon('far fa-clock')} {humanTime(entry.createdAt())}\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n","import Page from 'flarum/components/Page';\nimport icon from 'flarum/helpers/icon';\nimport Button from 'flarum/components/Button';\nimport Select from 'flarum/components/Select';\nimport Stream from 'flarum/utils/Stream';\nimport ActionLogControls from '../utils/ActionLogControls';\nimport Formatter from '../utils/Formatter';\nimport ActionLogEntryList from './ActionLogEntryList';\n\nexport default class ActionLogPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.entries = [];\n\n    this.sortingOptions = {\n      newest: '-createdAt',\n      oldest: 'createdAt',\n    };\n\n    this.sort = 'newest';\n\n    this.offset = 0;\n\n    this.limit = 20;\n\n    this.total = 0;\n\n    this.count = 0;\n\n    this.page = 0;\n\n    this.query = Stream('');\n\n    this.controls = new ActionLogControls(this);\n\n    this.load();\n  }\n\n  view() {\n    return (\n      <div className=\"ActionLogPage\">\n        <div className=\"ActionLogPage-header\">\n          <div className=\"container\">\n            <h2>\n              {icon('fas fa-clipboard-list')} {app.translator.trans('sycho-action-log.admin.title')}\n            </h2>\n            <p>{app.translator.trans('sycho-action-log.admin.description')}</p>\n            <p>{app.translator.trans('sycho-action-log.admin.total_entries', { count: this.total || '0' })}</p>\n            {this.controls.mainControls(this).toArray()}\n          </div>\n        </div>\n\n        <div className=\"ActionLogPage-content\">\n          <div className=\"container\">\n            <div className=\"ActionLogPage-navigation\">{this.controls.filterControls(this).toArray()}</div>\n            <ActionLogEntryList loading={this.loading} entries={this.entries} controls={this.controls} />\n            <div className=\"ActionLogPage-navigation\">{this.buildPagination()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Loads the log entries\n   */\n  load(params) {\n    this.loading = true;\n\n    app.store\n      .find('action-log-entries', this.requestParams(params || {}))\n      .then(this.handleResponse.bind(this))\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  requestParams({ offset, query, sort }) {\n    if (typeof offset !== 'undefined') {\n      this.offset = offset;\n    }\n\n    if (typeof sort !== 'undefined') {\n      this.sort = sort;\n    }\n\n    return {\n      page: {\n        offset: this.offset,\n        limit: this.limit,\n      },\n      filter: {\n        q: query,\n      },\n      sort: this.sortingOptions[this.sort],\n    };\n  }\n\n  handleResponse(response) {\n    this.entries = response;\n    this.total = response.payload.meta.total || 0;\n    this.count = response.payload.meta.count || 0;\n    this.links = response.payload.links;\n    this.page = Math.ceil(this.offset / this.limit);\n\n    this.entries = this.entries.filter((entry) => {\n      return !(!this.isTagsEnabled() && (entry.resourceType() === 'tag' || entry.name() === 'tagged'));\n    });\n\n    this.entries.map((entry) => {\n      entry.formattedName = this.formatName(entry);\n    });\n\n    return response;\n  }\n\n  buildPagination() {\n    if (this.count <= this.limit) return <div className=\"ActionLogPage-pagination\"></div>;\n\n    return (\n      <div className=\"ActionLogPage-pagination\">\n        <Button className=\"Button Button--icon\" icon=\"fas fa-arrow-left\" onclick={this.prev.bind(this)} disabled={!this.hasPrev()} />\n        <Select value={this.page} options={this.getPages()} onchange={this.changePage.bind(this)} />\n        <Button className=\"Button Button--icon\" icon=\"fas fa-arrow-right\" onclick={this.next.bind(this)} disabled={!this.hasNext()} />\n      </div>\n    );\n  }\n\n  next() {\n    if (!this.hasNext()) return;\n\n    this.load({ offset: this.offset + this.limit });\n  }\n\n  prev() {\n    if (!this.hasPrev()) return;\n\n    this.load({ offset: this.offset - this.limit });\n  }\n\n  hasNext() {\n    return this.offset + this.limit < this.count;\n  }\n\n  hasPrev() {\n    return this.links.prev;\n  }\n\n  getPages() {\n    let pageRange = Array.from({ length: Math.ceil(this.count / this.limit) }, (v, k) => k + 1);\n\n    pageRange.map((number, index) => {\n      pageRange[index] = app.translator.trans('sycho-action-log.admin.page', { number });\n    });\n\n    return pageRange;\n  }\n\n  changePage(value) {\n    if (!Object.keys(this.getPages()).includes(value)) return;\n\n    this.load({ offset: value * this.limit });\n  }\n\n  /**\n   * @param entry\n   * @returns {string}\n   */\n  formatName(entry) {\n    return new Formatter(entry).handle();\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isTagsEnabled() {\n    return JSON.parse(app.data.settings.extensions_enabled).indexOf('flarum-tags') !== -1;\n  }\n}\n","import { extend } from 'flarum/extend';\nimport ActionLogPage from './components/ActionLogPage';\nimport AdminNav from 'flarum/components/AdminNav';\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\n\nexport default function () {\n  app.routes['sycho-action-log'] = { path: '/action-log', component: ActionLogPage };\n\n  app.extensionSettings['sycho-action-log'] = () => m.route.set(app.route('sycho-action-log'));\n\n  extend(AdminNav.prototype, 'items', (items) => {\n    items.add(\n      'sycho-action-log',\n      <AdminLinkButton\n        href={app.route('sycho-action-log')}\n        icon=\"fas fa-clipboard-list\"\n        description={app.translator.trans('sycho-action-log.admin.description')}\n      >\n        {app.translator.trans('sycho-action-log.admin.title')}\n      </AdminLinkButton>\n    );\n\n    return items;\n  });\n}\n","import ActionLogPage from './components/ActionLogPage';\nimport Input from './components/Input';\nimport ActionLogSettingsModal from './modals/ActionLogSettingsModal';\nimport FiltersHelpModal from './modals/FiltersHelpModal';\nimport ActionLogEntry from './models/ActionLogEntry';\nimport ActionLogControls from './utils/ActionLogControls';\n\nexport default {\n  'actionLog/components/ActionLogPage': ActionLogPage,\n  'actionLog/components/Input': Input,\n  'actionLog/modals/ActionLogSettingsModal': ActionLogSettingsModal,\n  'actionLog/modals/FiltersHelpModal': FiltersHelpModal,\n  'actionLog/models/ActionLogEntry': ActionLogEntry,\n  'actionLog/utils/ActionLogControls': ActionLogControls,\n};\n","import app from 'flarum/app';\nimport ActionLogEntry from './models/ActionLogEntry';\nimport addActionLogPane from './addActionLogPane';\n\napp.initializers.add('sycho-action-log', (app) => {\n  app.store.models['action-log-entries'] = ActionLogEntry;\n\n  addActionLogPane();\n}, -90);\n\nimport actionLogCompat from './compat';\nimport { compat } from '@flarum/core/admin';\n\nObject.assign(compat, actionLogCompat);\n"],"sourceRoot":""}