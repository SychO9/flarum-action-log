{"version":3,"sources":["webpack://@sycho/flarum-action-log/webpack/bootstrap","webpack://@sycho/flarum-action-log/./admin.js","webpack://@sycho/flarum-action-log/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@sycho/flarum-action-log/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@sycho/flarum-action-log/./src/admin/addActionLogPane.js","webpack://@sycho/flarum-action-log/./src/admin/compat.js","webpack://@sycho/flarum-action-log/./src/admin/components/ActionLogPage.js","webpack://@sycho/flarum-action-log/./src/admin/components/ActionLogSettingsModal.js","webpack://@sycho/flarum-action-log/./src/admin/components/Input.js","webpack://@sycho/flarum-action-log/./src/admin/index.js","webpack://@sycho/flarum-action-log/./src/admin/models/ActionLogEntry.js","webpack://@sycho/flarum-action-log/./src/admin/utils/ActionLogControls.js","webpack://@sycho/flarum-action-log/external \"flarum.core\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['Component']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['Model']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['app']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/AdminNav']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Button']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Dropdown']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Page']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Placeholder']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Select']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['components/Switch']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['extend']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/avatar']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/icon']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['helpers/username']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['utils/ItemList']\"","webpack://@sycho/flarum-action-log/external \"flarum.core.compat['utils/mixin']\""],"names":["app","routes","actionLog","path","component","ActionLogPage","extensionSettings","m","route","extend","AdminNav","prototype","items","add","AdminLinkButton","href","icon","children","translator","trans","description","Input","ActionLogEntry","ActionLogControls","init","entries","sortingOptions","newest","oldest","sort","offset","limit","total","count","page","query","prop","controls","load","view","mainControls","toArray","filterControls","loading","length","map","entry","avatar","actor","username","type","humanTime","createdAt","formattedName","buildPagination","showActor","params","store","find","requestParams","then","handleResponse","bind","redraw","filter","q","response","payload","meta","links","Math","ceil","formatName","prev","hasPrev","getPages","changePage","next","hasNext","pageRange","Array","from","v","k","number","index","value","Object","keys","includes","key","format","resourceType","name","buildResourceName","user","title","id","version","link","Page","ActionLogSettingsModal","excludedLoggingSetting","setting","JSON","stringify","actions","moderation","discussion","post","administration","group","extension","form","action","getExcludedLoggingValue","parse","actionName","excludedLogging","push","item","SettingsModal","props","className","parentClassName","iconValue","Component","initializers","models","addActionLogPane","compat","actionLogCompat","mixin","Model","attribute","hasOne","resourceId","transformDate","ItemList","Button","onclick","clear","modal","show","placeholder","oninput","search","Dropdown","buttonClassName","label","active","updateSort","withAttr","searching","searchTimeout","clearTimeout","setTimeout","request","url","forum","method"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin'\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport ActionLogPage from './components/ActionLogPage';\nimport AdminNav from 'flarum/components/AdminNav';\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\n\nexport default function() {\n  app.routes.actionLog = {path: '/logs', component: ActionLogPage.component()};\n\n  app.extensionSettings['sycho-action-log'] = m.route(app.route('actionLog'));\n\n  extend(AdminNav.prototype, 'items', items => {\n    items.add('actionLog', AdminLinkButton.component({\n      href: app.route('actionLog'),\n      icon: 'fas fa-clipboard-list',\n      children: app.translator.trans('sycho-action-log.admin.title'),\n      description: app.translator.trans('sycho-action-log.admin.description'),\n    }));\n  });\n}\n","import ActionLogPage from './components/ActionLogPage';\nimport Input from './components/Input';\nimport ActionLogEntry from './models/ActionLogEntry';\nimport ActionLogControls from './utils/ActionLogControls';\n\nexport default {\n  'actionLog/components/ActionLogPage': ActionLogPage,\n  'actionLog/components/Input': Input,\n  'actionLog/models/ActionLogEntry': ActionLogEntry,\n  'actionLog/utils/ActionLogControls': ActionLogControls,\n};\n","import Page from 'flarum/components/Page';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport humanTime from 'flarum/helpers/humanTime';\nimport icon from 'flarum/helpers/icon';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport Placeholder from 'flarum/components/Placeholder';\nimport Button from 'flarum/components/Button';\nimport Select from 'flarum/components/Select';\nimport ActionLogControls from '../utils/ActionLogControls';\n\nexport default class ActionLogPage extends Page {\n  init() {\n    super.init();\n\n    this.entries = [];\n\n    this.sortingOptions = {\n      newest: '-createdAt',\n      oldest: 'createdAt',\n    };\n\n    this.sort = 'newest';\n\n    this.offset = 0;\n\n    this.limit = 20;\n\n    this.total = 0;\n\n    this.count = 0;\n\n    this.page = 0;\n\n    this.query = m.prop('');\n\n    this.controls = new ActionLogControls(this);\n\n    this.load();\n  }\n\n  view() {\n    return (\n      <div className=\"ActionLogPage\">\n        <div className=\"ActionLogPage-header\">\n          <div className=\"container\">\n            <h2>\n              {icon('fas fa-clipboard-list')} {app.translator.trans('sycho-action-log.admin.title')}\n            </h2>\n            <p>{app.translator.trans('sycho-action-log.admin.description')}</p>\n            <p>{app.translator.trans('sycho-action-log.admin.total_entries', { count: this.total || '0' })}</p>\n            {this.controls.mainControls(this).toArray()}\n          </div>\n        </div>\n\n        <div className=\"ActionLogPage-content\">\n          <div className=\"container\">\n            <div className=\"ActionLogPage-navigation\">\n              {this.controls.filterControls(this).toArray()}\n            </div>\n            {this.loading ? (\n              <LoadingIndicator className=\"LoadingIndicator--block\" />\n            ) :\n              this.entries.length ? [\n                <div className=\"ActionLogGrid\">\n                  {this.entries.map(entry => (\n                    <div className=\"ActionLogGrid-item\">\n                      <div className=\"ActionLogGrid-Avatar\">{avatar(entry.actor())}</div>\n                      <div className=\"ActionLogGrid-itemContent\">\n                        <div className=\"ActionLogGrid-entryDetails\">\n                          <div className=\"ActionLogGrid-entryActor\">{username(entry.actor())}</div>\n                          <div className=\"ActionLogGrid-entryType\">{entry.type()}</div>\n                          <div className=\"ActionLogGrid-entryTime\">{icon('far fa-clock')} {humanTime(entry.createdAt())}</div>\n                        </div>\n                        <div className=\"ActionLogGrid-entryName\">{entry.formattedName}</div>\n                      </div>\n                    </div>\n                  ))}\n                </div>,\n                <div className=\"ActionLogPage-navigation\">{this.buildPagination()}</div>\n              ] : (\n                <Placeholder text={app.translator.trans('sycho-action-log.admin.no_entries')} />\n              )\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * @param entry\n   * @returns string\n   */\n  showActor(entry) {\n    if (! entry.actor()) return;\n\n    return <a>{avatar(entry.actor())}{username(entry.actor())}</a>;\n  }\n\n  /**\n   * Loads the log entries\n   */\n  load(params) {\n    this.loading = true;\n\n    app.store\n      .find('action-log-entries', this.requestParams(params || {}))\n      .then(this.handleResponse.bind(this))\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  requestParams({ offset, query, sort }) {\n    if (typeof offset !== 'undefined') {\n      this.offset = offset;\n    }\n\n    if (typeof sort !== 'undefined') {\n      this.sort = sort;\n    }\n\n    return {\n      page: {\n        offset: this.offset,\n        limit: this.limit,\n      },\n      filter: {\n        q: query,\n      },\n      sort: this.sortingOptions[this.sort],\n    };\n  }\n\n  handleResponse(response) {\n    this.entries = response;\n    this.total = response.payload.meta.total || 0;\n    this.count = response.payload.meta.count || 0;\n    this.links = response.payload.links;\n    this.page = Math.ceil(this.offset / this.limit);\n\n    this.entries.map(entry => {\n      entry.formattedName = this.formatName(entry);\n    });\n\n    return response;\n  }\n\n  buildPagination() {\n    if (this.count <= this.limit) return;\n\n    return (\n      <div className=\"ActionLogPage-pagination\">\n        <Button\n          className=\"Button Button--icon\"\n          icon=\"fas fa-arrow-left\"\n          onclick={this.prev.bind(this)}\n          disabled={!this.hasPrev()}\n        />\n        {<Select\n          value={this.page}\n          options={this.getPages()}\n          onchange={this.changePage.bind(this)}\n        />}\n        <Button\n          className=\"Button Button--icon\"\n          icon=\"fas fa-arrow-right\"\n          onclick={this.next.bind(this)}\n          disabled={!this.hasNext()}\n        />\n      </div>\n    );\n  }\n\n  next() {\n    if (!this.hasNext()) return;\n\n    this.load({ offset: this.offset + this.limit });\n  }\n\n  prev() {\n    if (!this.hasPrev()) return;\n\n    this.load({ offset: this.offset - this.limit });\n  }\n\n  hasNext() {\n    return this.offset+this.limit < this.count;\n  }\n\n  hasPrev() {\n    return this.links.prev;\n  }\n\n  getPages() {\n    let pageRange = Array.from({ length: Math.ceil(this.count/this.limit) }, (v, k) => k+1);\n\n    pageRange.map((number, index) => {\n      pageRange[index] = app.translator.trans('sycho-action-log.admin.page', { number });\n    });\n\n    return pageRange;\n  }\n\n  changePage(value) {\n    if (!Object.keys(this.getPages()).includes(value)) return;\n\n    this.load({ offset: value*this.limit });\n  }\n\n  /**\n   * Finds the appropriate language string\n   * and calls for the resource name to be built\n   *\n   * @param entry\n   * @returns string\n   */\n  formatName(entry) {\n    let key = `sycho-action-log.admin.actions.${entry.type()}`;\n    let format = entry.format();\n\n    if (entry.resourceType().length) {\n      key += `.${entry.resourceType()}`;\n    }\n\n    key += `.${entry.name()}.action`;\n\n    // If there are any objects, convert them to strings using the buildResourceName() method\n    Object.keys(format).map((key, index) => {\n      if (typeof format[key] !== 'object') return;\n\n      // The core code tries to get the displayName attribute when the\n      // translation parameter key is named 'user', even if the value is a string\n      // so we have no choice but to add some ugly hackish code here\n      format[key === 'user' ? 'u' : key] = this.buildResourceName(key, entry);\n\n      if (key === 'user')\n        delete format.user;\n    });\n\n    Object.keys(format).map((key, index) => {\n      format[key] = <strong>{format[key]}</strong>;\n    });\n\n    return app.translator.trans(key, format);\n  }\n\n  /**\n   * Gives context to the resource manipulated\n   *\n   * @param format\n   * @param entry\n   * @returns string\n   */\n  buildResourceName(key, entry) {\n    const format = entry.format()[key] || {};\n    let name = format.title || '';\n\n    if (format.id) {\n      format.version = `#${format.id}`;\n    }\n\n    if (format.version) {\n      name = [\n        name,\n        <i> ({format.version})</i>\n      ];\n    }\n\n    if (format.icon) {\n      name = [\n        <span className=\"Badge ActionLogExtensionIcon\" style={format.icon}>\n          {icon(format.icon.name)}\n        </span>,\n        name\n      ];\n    }\n\n    if (format.link) {\n      name = <a href={format.link}>{name}</a>;\n    }\n\n    return name;\n  }\n}\n","import SettingsModal from 'flarum/components/SettingsModal';\nimport Switch from 'flarum/components/Switch';\nimport Button from 'flarum/components/Button';\n\nexport default class ActionLogSettingsModal extends SettingsModal {\n  init() {\n    super.init();\n\n    this.excludedLoggingSetting = this.setting('sycho-action-log.excluded_logging', JSON.stringify([]));\n  }\n\n  title() {\n    return app.translator.trans('sycho-action-log.admin.settings');\n  }\n\n  actions() {\n    const items = {\n      moderation: {\n        discussion: [\n          'locked',\n          'unlocked',\n          'deleted',\n          'stickied',\n          'unstickied',\n        ],\n        user: [\n          'suspended',\n          'unsuspended',\n        ],\n        post: [\n          'approved',\n        ],\n      },\n      administration: {\n        group: [\n          'created',\n          'deleted',\n        ],\n        extension: [\n          'enabled',\n          'disabled',\n          'uninstalled',\n        ],\n      },\n    };\n\n    return items;\n  }\n\n  form() {\n    const actions = this.actions();\n\n    return Object.keys(actions).map(key => (\n      <div className=\"ActionLogSettings-logTypes\">\n        <h3>\n          <span>{app.translator.trans(`sycho-action-log.admin.actions.${key}.label`)}</span>\n        </h3>\n        {Object.keys(actions[key]).map(resourceType => (\n          <div className=\"ActionLogSettings-resourceTypes\">\n            <h4>{app.translator.trans(`sycho-action-log.admin.actions.${key}.${resourceType}.label`)}</h4>\n            {actions[key][resourceType].map(action => (\n              <div className=\"Form-group\">\n                <Switch\n                  state={!this.getExcludedLoggingValue().includes(`${key}.${resourceType}.${action}`)}\n                  onchange={this.switch.bind(this, key, resourceType, action)}\n                >\n                  {app.translator.trans(`sycho-action-log.admin.actions.${key}.${resourceType}.${action}.label`)}\n                </Switch>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    ));\n  }\n\n  getExcludedLoggingValue() {\n    return JSON.parse(this.excludedLoggingSetting());;\n  }\n\n  switch(key, resourceType, action, value) {\n    const actionName = `${key}.${resourceType}.${action}`;\n    let excludedLogging = this.getExcludedLoggingValue();\n\n    if (!value)\n      excludedLogging.push(actionName);\n    else\n      excludedLogging = excludedLogging.filter(item => item !== actionName);\n\n    this.excludedLoggingSetting(JSON.stringify(excludedLogging));\n  }\n}\n","import Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\n\nexport default class Input extends Component {\n  view() {\n    this.props.className = this.props.className || '';\n\n    this.props.className += ' ActionLog-FormControl';\n\n    if (this.props.icon) {\n      this.props.className += ' hasIcon';\n    }\n\n    let className = `ActionLog-input ${this.props.parentClassName || ''}`;\n\n    return (\n      <div className={className}>\n        {this.icon()}\n        <input {...this.props} />\n      </div>\n    );\n  }\n\n  icon() {\n    if (!this.props.icon) return;\n\n    const iconValue = this.props.icon;\n\n    delete this.props.icon;\n\n    return <span class=\"ActionLog-inputIcon\">{icon(iconValue)}</span>;\n  }\n}\n","import app from 'flarum/app';\nimport ActionLogEntry from './models/ActionLogEntry';\nimport addActionLogPane from './addActionLogPane';\n\napp.initializers.add('sycho-action-log', app => {\n  app.store.models['action-log-entries'] = ActionLogEntry;\n\n  addActionLogPane();\n});\n\nimport actionLogCompat from './compat';\nimport { compat } from '@flarum/core/admin';\n\nObject.assign(compat, actionLogCompat);\n","import Model from 'flarum/Model';\nimport mixin from \"flarum/utils/mixin\";\n\nexport default class ActionLogEntry extends mixin(Model, {\n  id: Model.attribute('id'),\n  name: Model.attribute('name'),\n  type: Model.attribute('type'),\n  actor: Model.hasOne('actor'),\n  resourceType: Model.attribute('resource_type'),\n  resourceId: Model.attribute('resource_id'),\n  createdAt: Model.attribute('created_at', Model.transformDate),\n  format: Model.attribute('format'),\n\n  discussion: Model.hasOne('discussion'),\n  post: Model.hasOne('post'),\n  group: Model.hasOne('group'),\n  user: Model.hasOne('user'),\n}) {}\n","import ItemList from 'flarum/utils/ItemList';\nimport Button from 'flarum/components/Button';\nimport Dropdown from 'flarum/components/Dropdown';\nimport Input from '../components/Input';\nimport ActionLogSettingsModal from '../components/ActionLogSettingsModal';\n\nexport default class ActionLogControls {\n  constructor(component) {\n    this.component = component;\n  }\n\n  mainControls() {\n    const items = new ItemList();\n\n    items.add('clear', Button.component({\n      className: \"Button Button--primary\",\n      children: \"Clear Log\",\n      icon: \"fas fa-trash\",\n      onclick: this.clear.bind(this),\n    }));\n\n    items.add('settings', Button.component({\n      className: \"Button\",\n      children: app.translator.trans('sycho-action-log.admin.settings'),\n      icon: \"fas fa-cogs\",\n      onclick: () => app.modal.show(new ActionLogSettingsModal()),\n    }));\n\n    return items;\n  }\n\n  filterControls() {\n    const items = new ItemList();\n\n    items.add('search', Input.component({\n      icon: \"fas fa-filter\",\n      parentClassName: \"ActionLog-search\",\n      className: \"FormControl\",\n      placeholder: app.translator.trans('sycho-action-log.admin.search'),\n      value: this.component.query(),\n      oninput: this.search.bind(this),\n    }));\n\n    items.add('sort', Dropdown.component({\n      buttonClassName: 'Button',\n      label: app.translator.trans(`sycho-action-log.admin.sort.${this.component.sort}`),\n      children: Object.keys(this.component.sortingOptions).map(key => {\n        const active = this.component.sort === key;\n\n        return Button.component({\n          children: app.translator.trans(`sycho-action-log.admin.sort.${key}`),\n          icon: active ? 'fas fa-check' : true,\n          onclick: this.updateSort.bind(this, key),\n          active,\n        });\n      })\n    }));\n\n    items.add('pagination', this.component.buildPagination());\n\n    return items;\n  }\n\n  updateSort(sort) {\n    this.component.load({ sort });\n  }\n\n  search() {\n    m.withAttr('value', this.component.query)();\n\n    this.component.loading = true;\n    this.searching = () => this.component.load({ query: this.component.query() });\n\n    if (this.searchTimeout)\n      clearTimeout(this.searchTimeout);\n\n    this.searchTimeout = setTimeout(this.searching, 250);\n  }\n\n  clear() {\n    this.component.loading = true;\n\n    app\n      .request({\n        url: app.forum.attribute('apiUrl') + '/action-log-entries',\n        method: 'DELETE'\n      })\n      .then(() => this.component.load());\n  }\n}\n","module.exports = flarum.core;","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Placeholder'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}